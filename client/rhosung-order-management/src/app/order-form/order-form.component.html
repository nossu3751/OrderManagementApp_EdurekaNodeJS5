<div class="container">
    <!-- <ul>
        <li *ngFor="let item of itemList">
            {{item["name"]}}
        </li>
    </ul> -->

    <div class="card">
        <div class="card-body">
            <form [formGroup] = "orderForm" (ngSubmit) = "orderForm.valid">
                <div class="row justify-content-center mb-3">
                    <h2>Order what you want!</h2>
                </div>
                <div class="form-group">
                    <input formControlName="userName" type="text" class="form-control" name="name" placeholder="Your Name"
                        required="required" [ngModel]>

                    <div class="row justify-content-center mt-2" style="color:#3d7550">
                        <small *ngIf="orderForm.get('userName')?.touched && orderForm.get('userName')?.errors?.required"> 
                            Your name is required!
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="userEmail" type="text" class="form-control" name="email" placeholder="Your Email"
                        required="required">
                    <div class="row justify-content-center mt-2" style="color:#3d7550">
                        <small *ngIf="orderForm.get('userEmail')?.touched && orderForm.get('userEmail')?.errors?.required"> 
                            Your email is required!
                        </small>
                        <small *ngIf="orderForm.get('userEmail')?.touched && orderForm.get('userEmail')?.errors?.pattern"> 
                            Please type correct email address.
                        </small>
                    </div>
                </div>
                <div class="form-group">
                    <input formControlName="userAddress" type="text" class="form-control" name="address" placeholder="Your Address"
                        required="required">

                    <div class="row justify-content-center mt-2" style="color:#3d7550">
                        <small *ngIf="orderForm.get('userAddress')?.touched && orderForm.get('userAddress')?.errors?.required"> 
                            Your address is required!
                        </small>
                    </div>
                </div>
                <div class="row justify-content-center mt-5 mb-4">
                    <h4> Select Item you want.</h4>
                </div>
                
                <div class="card-columns mb-4" style="column-count: 2;">
                    <ng-container *ngFor="let item of itemList">
                        <div class="card" *ngIf="selectedItem !== item; else selected"(click)="setSelected(item)" style="cursor:pointer">
                            <img class="card-img-top" [src]="item['image']" style="height:10em">
                            <div class="card-body">
                                <h5 class="card-title">{{item['name']}}</h5>
                                <p class="card-text">   
                                    {{item['category']}} sold by {{item['seller']}}
                                </p>
                                <small style="color:grey"> 
                                    {{item['price'] | currency}}
                                </small>
                            </div>
                        </div>
                        <ng-template #selected>
                            <div class="card" style="cursor:pointer; border: solid 4px rgb(115, 219, 147);">
                                <img class="card-img-top" [src]="item['image']" style="height:10em">
                                <div class="card-body">
                                  <h5 class="card-title">{{item['name']}}</h5>
                                  <p class="card-text">   
                                      {{item['category']}} sold by {{item['seller']}}
                                  </p>

                                  <small style="color:grey"> 
                                      {{item['price'] | currency }}
                                  </small>
                                  <i class="fas fa-check" style="color:rgb(115, 219, 147);font-size:xx-large; position:absolute; bottom:20px; right:20px; z-index:100"></i>
                                </div>
                            </div>
                        </ng-template>
                    </ng-container>
                </div>   
                <div class="row justify-content-center mb-3" *ngIf="errorMsg !== ''" style="color:rgb(231, 119, 119)">
                    <h5> {{errorMsg}} </h5>
                </div>
                <div class="form-group">
                    <button type="submit" style="background-color: #3d7550;" class="btn btn-success btn-lg btn-block" (click)="orderSubmit()">Order Now</button>
                </div>
            </form>
        </div>
    </div>
</div>

